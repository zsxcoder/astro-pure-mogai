import{c as v,j as e}from"./createLucideIcon.CBGVLFT6.js";import{r as h}from"./index.BmW6Ki2V.js";import{F as u}from"./friendLevels.373wrxB-.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y=[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]],j=v("thumbs-up",y),w=({link:a})=>{const[o,g]=h.useState(!1),[n,d]=h.useState(!1),[i,m]=h.useState(!1),x=h.useRef(null),l=(()=>{if(!a.addDate)return 0;const r=new Date(a.addDate),c=new Date().getTime()-r.getTime();return Math.floor(c/(1e3*60*60*24))})(),t=(()=>{if(l<0)return null;const r=u.findIndex(s=>l<s.days);return r===-1?u[u.length-1]:u[r]})();return h.useEffect(()=>{if(!x.current||i)return;const r=new IntersectionObserver(s=>{s[0].isIntersecting&&(m(!0),r.disconnect())},{rootMargin:"100px"});return r.observe(x.current),()=>r.disconnect()},[i]),e.jsxs("a",{href:a.url,target:"_blank",rel:"noopener noreferrer",className:`group relative flex flex-col gap-3 p-5 rounded-xl border transition-all duration-300 
                bg-white dark:bg-white/5 
                hover:-translate-y-1 hover:shadow-lg
                ${t?t.border.replace("border-","border-opacity-50 hover:border-opacity-100 "):"border-gray-200 dark:border-white/10"}
                overflow-hidden min-h-[140px] h-auto no-underline
            `,children:[e.jsx("div",{className:`absolute top-0 right-0 p-8 opacity-0 group-hover:opacity-5 transition-opacity pointer-events-none ${t?.theme}`,children:t&&e.jsx(t.Icon,{size:120})}),e.jsxs("div",{className:"flex items-start gap-4 w-full",children:[e.jsxs("div",{ref:x,className:"relative w-16 h-16 flex-shrink-0",children:[e.jsx("div",{className:`absolute inset-0 rounded-full border-2 ${t?`${t.border} opacity-20`:"border-gray-200"} scale-110`}),!o&&!n&&e.jsx("div",{className:"absolute inset-0 rounded-full bg-gray-200 dark:bg-gray-700 animate-pulse"}),!n&&i?e.jsx("img",{src:a.avatar,alt:a.name,onLoad:()=>g(!0),onError:()=>{d(!0),g(!0)},className:`w-16 h-16 rounded-full object-cover relative z-10 transition-transform duration-500 group-hover:rotate-12 ${o?"opacity-100":"opacity-0"}`}):n&&e.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-300 dark:bg-gray-600 flex items-center justify-center text-gray-500 text-lg z-10 relative",children:a.name.charAt(0)})]}),e.jsxs("div",{className:"flex-grow min-w-0 z-10 flex flex-col pr-12 pb-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[e.jsx("h3",{className:"font-bold text-gray-900 dark:text-white truncate no-underline text-base leading-tight align-middle",children:a.name}),a.recommended&&e.jsx("div",{className:"relative group/rec inline-block align-middle",title:"推荐",children:e.jsx(j,{size:18,className:"text-[#d3bc8e] align-middle",strokeWidth:3,fill:"#d3bc8e",fillOpacity:.2,style:{transform:"translateY(7px)"}})})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 leading-relaxed line-clamp-2 no-underline",children:a.description})]})]}),t&&e.jsx("div",{className:"absolute bottom-[-5px] right-[-5px] opacity-25 group-hover:opacity-40 transition-all duration-300 group-hover:scale-110 group-hover:rotate-[-12deg] pointer-events-none",children:e.jsxs("div",{className:`relative w-24 h-24 flex items-center justify-center ${t.color}`,children:[e.jsx("div",{className:"absolute top-3 font-black tracking-widest uppercase text-[10px] opacity-100 font-serif",children:t.title}),e.jsx(t.Icon,{size:40,strokeWidth:1.5,className:"currentColor opacity-60"}),e.jsxs("div",{className:"absolute bottom-3 font-mono text-[9px] opacity-100 font-bold",children:[l," DAYS"]})]})})]})},I=({links:a})=>{const[o,g]=h.useState(1),n=10;h.useEffect(()=>{window.dispatchEvent(new Event("scroll"))},[]);const d=a.filter(t=>!t.disconnected),i=Math.ceil(d.length/n),m=o*n,x=m-n,b=d.slice(x,m),l=t=>g(t),f=()=>{const t=[];let s=Math.max(1,o-Math.floor(2.5)),c=Math.min(i,s+5-1);c-s+1<5&&(s=Math.max(1,c-5+1)),s>1&&(t.push(1),s>2&&t.push("..."));for(let p=s;p<=c;p++)t.push(p);return c<i&&(c<i-1&&t.push("..."),t.push(i)),t};return e.jsxs("div",{className:"mb-24",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("svg",{className:"w-6 h-6 text-docs-accent dark:text-dark-accent flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",style:{transform:"translateY(7px)"},children:e.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})}),e.jsx("h2",{id:"connected-friends",className:"text-xl font-bold text-slate-900 dark:text-white",children:"活跃友链"})]}),d.length===0?e.jsx("div",{className:"text-center py-12 bg-white dark:bg-white/5 border border-slate-200 dark:border-white/10 rounded-lg",children:e.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"暂无活跃友链"})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 mb-6",children:b.map((t,r)=>e.jsx(w,{link:t},`${t.name}-${r}`))}),i>1&&e.jsxs("div",{className:"flex justify-center items-center gap-2",children:[e.jsx("button",{onClick:()=>l(o-1),disabled:o===1,className:"px-3 py-1 rounded-lg border border-slate-200 dark:border-white/10 bg-white dark:bg-white/5 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-white/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"上一页"}),e.jsx("div",{className:"flex items-center gap-1",children:f().map((t,r)=>e.jsx("button",{onClick:()=>typeof t=="number"&&l(t),disabled:typeof t!="number",className:`px-3 py-1 rounded-lg transition-colors ${typeof t=="number"?o===t?"bg-primary text-white dark:bg-primary dark:text-white":"border border-slate-200 dark:border-white/10 bg-white dark:bg-white/5 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-white/10":"text-slate-500 dark:text-slate-400 cursor-default"}`,children:t},r))}),e.jsx("button",{onClick:()=>l(o+1),disabled:o===i,className:"px-3 py-1 rounded-lg border border-slate-200 dark:border-white/10 bg-white dark:bg-white/5 text-slate-700 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-white/10 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"下一页"})]}),e.jsxs("div",{className:"text-center text-sm text-slate-500 dark:text-slate-400 mt-4",children:["显示第 ",x+1," 至 ",Math.min(m,d.length)," 项，共 ",d.length," 项"]})]})]})};export{I as default};
