---
interface Props {
  src: string;
  mirror?: string;
  caption?: string;
  width?: string | number;
  height?: string | number;
  zoom?: boolean;
}

const {
  src,
  mirror,
  caption,
  width,
  height,
  zoom = true,
} = Astro.props;

// Handle mirror functionality (third-party image loading service)
let imageSrc = src;
if (mirror) {
  // Implement mirror logic if needed
  // This would depend on the specific mirror service
}
---

<figure class="image">
  <img
    src={imageSrc}
    alt={caption || ''}
    {width}
    {height}
    class={zoom ? 'zoomable' : ''}
    style={{ cursor: zoom ? 'zoom-in' : 'auto' }}
  />
  {caption && (
    <figcaption>{caption}</figcaption>
  )}
</figure>

<style>
  .image {
    margin: 1rem 0;
  }
  
  .image img {
    max-width: 100%;
    height: auto;
    display: block;
  }
  
  figcaption {
    margin-top: 0.5em;
    font-size: 0.875em;
    text-align: center;
    color: var(--text-secondary, #666);
  }
</style>
