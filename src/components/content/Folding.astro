---
interface Props {
  title?: string;
  open?: boolean;
}

const { title, open = false } = Astro.props;
---

<style>
  .folding {
    margin: 1em 0;
    padding: 0.5em 0.8em;
    border: 1px solid hsl(var(--border) / var(--un-border-opacity, 1));
    border-radius: 0.5em;
    background-color: hsl(var(--card) / var(--un-bg-opacity, 1));
    font-size: 0.9em;
    transition: all 0.2s ease;
  }

  .folding[open] {
    > summary {
      margin-bottom: 0.5em;
      font-weight: bold;
      color: hsl(var(--foreground) / var(--un-text-opacity, 1));

      &::before {
        content: "收起";
      }
    }
  }

  .folding > summary {
    margin: -0.5em -0.8em;
    padding: 0.5em 0.8em;
    color: hsl(var(--muted-foreground) / var(--un-text-opacity, 1));
    transition: all 0.2s ease;
    cursor: pointer;
    list-style: none;
    display: flex;
    justify-content: space-between;
    align-items: center;
  }

  /* 隐藏默认的三角形标记 */
  .folding > summary::-webkit-details-marker {
    display: none;
  }

  .folding > summary::before {
    content: "展开";
    opacity: 0.7;
    margin-left: 0.5em;
    font-weight: normal;
    transition: opacity 0.2s ease;
    white-space: nowrap;
  }

  .folding > summary:hover {
    color: hsl(var(--foreground) / var(--un-text-opacity, 1));

    &::before {
      opacity: 1;
    }
  }

  /* 深色模式适配 */
  html.dark .folding {
    background-color: hsl(var(--card) / var(--un-bg-opacity, 1));
    border-color: hsl(var(--border) / var(--un-border-opacity, 1));
  }

  html.dark .folding > summary {
    color: hsl(var(--muted-foreground) / var(--un-text-opacity, 1));
  }

  html.dark .folding > summary:hover {
    color: hsl(var(--foreground) / var(--un-text-opacity, 1));
  }
</style>

<details class="folding" open={open}>
  <!-- 折叠标题 - 只包含标题插槽 -->
  <summary>
    <slot name="title">{title}</slot>
  </summary>
  <!-- 折叠内容 - 包含默认插槽 -->
  <div class="folding-content">
    <slot></slot>
  </div>
</details>